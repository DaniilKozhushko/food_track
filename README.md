# food_track

![food_track](https://github.com/user-attachments/assets/e4d75812-c7f7-4929-96ed-733f12168a24)

Этот проект моделирует процесс работы с данными в рамках ресторанного бизнеса. Основная цель - отработка навыков программирования и *осознание* жизненного цикла данных. Идея: ежедневно происходит генерация заказов в виде файлов, затем данные загружаются в базу данных, преобразуются и визуализируются для анализа.

## Этапы реализации проекта:
1. **✅ Генерация синтетических данных на Python в формате csv**
2. **✅ Контейнеризация в Docker**
3. **⏳ Извлечение данных из файлов и загрузка в PostgreSQL**
4. **⏳ Отслеживание изменений с помощью Debezium**
5. **⏳ Интеграция Kafka**
6. **⏳ Преобразование данных через DBT**
7. **⏳ Визуализация в Superset**
8. **⏳ Подключение оркестратора Airflow**

## Подробное описание этапов:
### **1. Генерация синтетических данных на Python в формате csv**
Скрипт на python ежедневно создаёт фейковые заказы и сохрает их в формате `.csv`. Во время генерации учитываются несколько факторов для того, чтобы выходные данные были больше похожи на реальные:
1. Учитывается "тип" гостя: мужчина, женщина или ребёнок. Чтобы не получилось так, что ребёнок заказал алкоголь, были прописаны разные возможные сценарии, например женщина заказывает салат и вино, мужчина - стейк, гарнир и пиво и т.п.
2. В зависимости от дня недели, погодных условий (с помощью openweathermap API) и времени меняется количество гостей: по выходным вероятно будет больше заказов, причём в хорошую погоду и вечером и, соответственно, наоборот, в понедельник утром, если идёт дождь, заметно снизится поток гостей. Для более правдоподобной итоговой аналитики данный скрипт должен запускаться ежедневно в 12:00

### **2. Контейнеризация в Docker**
На текущем этапе проекта я добавил файлы `Dockerfile`, `.dockerignore` и `requirements.txt`, чтобы упаковать приложение в Docker-контейнер. Файл `.dockerignore` исключает ненужные файлы из контейнера (пока только `.git`), а в `Dockerfile` настроена сборка образа с необходимыми зависимостями (2 библиотеки для python). По мере роста проекта я буду дополнять эти файлы, а в конечном итоге выложу готовый образ на Docker Hub.

### **3. Извлечение данных из файлов и загрузка в PostgreSQL**
![food_track](https://github.com/user-attachments/assets/ac981a6c-f6f4-48c0-90c0-7859fbfc1e5f)
Для визуализации БД был задействован инструмент [drawsql.app](https://drawsql.app/teams/self-study/diagrams/food-track). Также во время работы возникла необходимость в структурировании и улучшении планирования, поэтому я воспользовался [Miro](https://miro.com/ru/). Для работы с файловой системой (в рамках локального компьютера и контейнера docker) были подключены модуль `os` и библиотека `dotenv`. Для создания БД и таблиц, были добавлены файлы `docker-compose.yml` и `init_db.py` с основными скриптами (с помощью `psycopg2`).

```
generator/
└── generator.py    # скрипт для генерации заказов
scripts/
├── fill_tables.py  # скрипт для наполнения таблиц входными данными
└── init_db.py      # скрипт для создания таблиц в БД
data/
├── menus.py        # переменная из этого файла используется в нескольких .py файлах
└── orders/         # папка для хранения файлов .csv со сгенерированными заказами
    └── ...
```

![python](https://img.shields.io/badge/python-3.13-yellow)